<!DOCTYPE html>
<html>
  <head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <!--<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">-->
  <meta name="description" content="要有一个从输入到输出的过程">
  <meta name="keyword" content="">
  
    <link rel="shortcut icon" href="/css/images/logo.png">
  
  <title>
    
      搭建个人博客 | CQ&#39;s Blog
    
  </title>
  <link href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
  <link href="//cdnjs.cloudflare.com/ajax/libs/nprogress/0.2.0/nprogress.min.css" rel="stylesheet">
  <link href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/tomorrow.min.css" rel="stylesheet">
  
<link rel="stylesheet" href="/css/style.css">

  
  <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/geopattern/1.2.3/js/geopattern.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/nprogress/0.2.0/nprogress.min.js"></script>
  
  
  
  


  
  
    
<script src="/js/local-search.js"></script>


<meta name="generator" content="Hexo 5.4.2"></head>
<div class="wechat-share">
  <img src="/css/images/logo.png" />
</div>
  <body>
    <header class="header fixed-header">
  <div class="header-container">
    <a class="home-link" href="/">
      <div class="logo"></div>
      <span>CQ's Blog</span>
    </a>
    <ul class="right-list">
      
        <li class="list-item">
          
            <a href="/" class="item-link">Home</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/categories/" class="item-link">Categories</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/records" class="item-link">Records</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/scratches/" class="item-link">Scratches</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/archives/" class="item-link">Archives</a>
          
        </li>
      
      
        <li class="menu-item menu-item-search right-list">
    <a role="button" class="popup-trigger">
        <i class="fa fa-search fa-fw"></i>
    </a>
</li>
      
    </ul>
    <div class="menu">
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </div>
    <div class="menu-mask">
      <ul class="menu-list">
        
          <li class="menu-item">
            
              <a href="/" class="menu-link">Home</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/categories/" class="menu-link">Categories</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/records" class="menu-link">Records</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/scratches/" class="menu-link">Scratches</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/archives/" class="menu-link">Archives</a>
            
          </li>
        
      </ul>
    </div>
    
      <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
            <span class="search-icon">
                <i class="fa fa-search"></i>
            </span>
            <div class="search-input-container">
                <input autocomplete="off" autocapitalize="off"
                    placeholder="Please enter your keyword(s) to search." spellcheck="false"
                    type="search" class="search-input">
            </div>
            <span class="popup-btn-close">
                <i class="fa fa-times-circle"></i>
            </span>
        </div>
        <div id="search-result">
            <div id="no-result">
                <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
            </div>
        </div>
    </div>
</div>
    
  </div>
</header>

    <div id="article-banner">
  <h2>搭建个人博客</h2>
  <!--<p class="post-date">2022-05-06</p>
  <div class="arrow-down">
    <a href="javascript:;"></a>
  </div>-->
</div>
<main class="app-body flex-box">
  <!-- Article START -->
  <article class="post-article">
    <section class="markdown-content"><h1 id="1、工具"><a href="#1、工具" class="headerlink" title="1、工具"></a>1、工具</h1><ul>
<li><p><a href="../../07/git/">Git</a>：一种分布式版本控制系统（DVCS）；</p>
</li>
<li><p>GitHub：一个只支持Git进行版本控制的代码托管平台；</p>
</li>
<li><p>GitHub Pages：提供免费静态网站托管服务，它能够对GitHub中的静态文件资源进行处理并展示成一个网站，同时还会给这个网站提供一个特定的域名，但用户也可以将域名改成自己想要的；</p>
</li>
<li><p>Node.js：一个开源和跨平台的JavaScript运行时环境；</p>
</li>
<li><p>Hexo：一个将用户编辑的md格式的文件生成HTML静态资源文件的博客框架。</p>
</li>
</ul>
<h1 id="2、前期准备"><a href="#2、前期准备" class="headerlink" title="2、前期准备"></a>2、前期准备</h1><h2 id="2-1-Git、GitHub及配置"><a href="#2-1-Git、GitHub及配置" class="headerlink" title="2.1 Git、GitHub及配置"></a>2.1 Git、GitHub及配置</h2><p>1）在<a target="_blank" rel="noopener" href="https://git-scm.com/downloads">Git</a>下载安装包并安装；</p>
<p>2）鼠标右键可以看到：<code>Git Bash Here</code>，单击打开；</p>
<p>3）输入<code>git --version</code>，可以看到安装好的版本信息；</p>
<p>4）在<a target="_blank" rel="noopener" href="https://github.com/">GitHub</a>注册账号；</p>
<p>5）设置Git用户信息；</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.name <span class="string">&quot;GitHubName&quot;</span></span><br><span class="line">git config --global user.email <span class="string">&quot;GitHubEmail&quot;</span></span><br></pre></td></tr></table></figure>

<p>6）生成SSH key</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa -C <span class="string">&quot;GitHubEmail&quot;</span></span><br><span class="line"><span class="comment"># -t rsa 指定要创建的秘钥类型为 RSA</span></span><br><span class="line"><span class="comment"># -C &quot;GitHubEmail&quot; 指定追加到公钥文件末尾以便于识别的注释（通常以电子邮件地址用作注释，但也可以使用任何最适合你基础结构的事物）</span></span><br></pre></td></tr></table></figure>

<p>7）连续一路回车直到生成一个矩形图案，此时，可以看到用户目录下生成了<code>.ssh</code>文件夹，该文件夹的<code>id_rsa</code>和<code>id_rsa.pub</code>两个文件分别对应SSH key的私钥和公钥；</p>
<img src="文件目录截图1.png" alt="文件目录截图1" style="zoom:70%;" />

<img src="文件目录截图2.png" alt="文件目录截图2" style="zoom:70%;" />

<p>8）打开 GitHub 主页 –&gt; <code>Settings</code> –&gt; <code>SSH and GPG keys</code> –&gt; <code>New SSH key</code>，将<code>id_rsa.pub</code>中的内容复制粘贴到key中，title 可以随便取，点击<code>Add SSH key</code>；</p>
<img src="项目设置截图1.png" alt="项目设置截图1" style="zoom:70%;" />

<p>9）验证是否成功；</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -T git@github.com</span><br></pre></td></tr></table></figure>

<p>10）SSH key配置完毕后，就可以将本地的源码和资源上传到GitHub，而无需每次都输账号和密码。</p>
<h2 id="2-2-GitHub-Page和域名"><a href="#2-2-GitHub-Page和域名" class="headerlink" title="2.2 GitHub Page和域名"></a>2.2 GitHub Page和域名</h2><p>1）打开GitHub主页 –&gt; <code>+</code>按钮 –&gt; <code>New respository</code>，在<code>Repository name</code>输入框中填入<code>GitHubName.github.io</code>，勾选<code>Initialize this repository with a README</code>选项；</p>
<p>2）在浏览器中输入<a target="_blank" rel="noopener" href="https://githubname.github.io/">https://GitHubName.github.io/</a> 即可看到如下页面，代表成功开启了GitHub Pages服务；</p>
<img src="浏览器截图1.png" alt="浏览器截图1" style="zoom:70%;" />

<p>3）在<a target="_blank" rel="noopener" href="https://wanwang.aliyun.com/">万网-阿里云</a>注册账号或直接登录，选择还未被注册的域名，进入结算页面，创建持有者信息模本，验证并等待审核，付钱；</p>
<img src="域名注册截图1.png" alt="域名注册截图1" style="zoom:70%;" />

<p>4）由于GitHub推荐在DNS中使用A记录和CNAME相结合的方式，在注册好的个人域名后点击解析添加如下两条解析记录，其中，IPv4地址可以通过<code>ping</code>得到；</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ping GitHubName.github.io</span><br></pre></td></tr></table></figure>

<img src="域名注册截图2.png" alt="域名注册截图2" style="zoom:70%;" />

<p>5）打开GitHubName.github.io仓库 –&gt; <code>Add file</code> –&gt; <code>Create new file</code>，文件名为<code>CNAME</code>，内容为注册好的个人域名，然后提交；</p>
<img src="项目设置截图2.png" alt="项目设置截图2" style="zoom:70%;" />

<p>6）打开GitHubName.github.io仓库 –&gt; <code>Settings</code> –&gt; <code>Pages</code>，勾选<code>Enforce HTTPS</code>选项即可强制走Https；</p>
<img src="项目设置截图3.png" alt="项目设置截图3" style="zoom:70%;" />

<p>7）在浏览器中输入个人域名即可看到如下页面，代表成功绑定了域名。</p>
<img src="浏览器截图2.png" alt="浏览器截图2" style="zoom:70%;" />

<h2 id="2-3-Node-js和Hexo"><a href="#2-3-Node-js和Hexo" class="headerlink" title="2.3 Node.js和Hexo"></a>2.3 Node.js和Hexo</h2><p>1）在<a target="_blank" rel="noopener" href="https://nodejs.org/en/download/">Node.js</a>下载安装包并安装；</p>
<p>2）查看安装好的版本信息；</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">node -v</span><br><span class="line">npm -v</span><br></pre></td></tr></table></figure>

<p>3）在<code>nodejs</code>文件夹中新建两个空文件夹 <code>node_cache</code>、<code>node_global</code>；</p>
<img src="文件目录截图3.png" alt="文件目录截图3" style="zoom:70%;" />

<p>4）配置（如果不配置的话，后续安装模块时会安装到C盘，不方便管理，甚至有可能安装好hexo后却无法使用）；</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm config <span class="built_in">set</span> prefix <span class="string">&quot;D:\nodejs\node_global&quot;</span></span><br><span class="line">npm config <span class="built_in">set</span> cache <span class="string">&quot;D:\nodejs\node_cache&quot;</span></span><br></pre></td></tr></table></figure>

<p>5）打开控制面板 –&gt; 系统 –&gt; 高级系统设置 –&gt; 环境变量，在系统变量中新建一个变量名为<code>ODE_PATH</code>，值为<code>D:\nodejs\node_global\node_modules</code>的变量；</p>
<img src="系统设置截图1.png" alt="系统设置截图1" style="zoom:70%;" />

<p>6）编辑用户变量里的<code>Path</code>，将npm的路径改为：<code>D:\nodejs\node_global</code>；</p>
<img src="系统设置截图2.png" alt="系统设置截图2" style="zoom:70%;" />

<p>7）安装webpack并查看版本信息；</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install webpack –g</span><br><span class="line">npm webpack –v</span><br></pre></td></tr></table></figure>

<p>至此，npm在安装全局模块时的路径和环境变量均设置完成；</p>
<p>8）安装hexo并查看版本信息。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install -g hexo-cli</span><br><span class="line">hexo –v</span><br></pre></td></tr></table></figure>

<h1 id="3、博客搭建"><a href="#3、博客搭建" class="headerlink" title="3、博客搭建"></a>3、博客搭建</h1><h2 id="3-1-搭建和预览"><a href="#3-1-搭建和预览" class="headerlink" title="3.1 搭建和预览"></a>3.1 搭建和预览</h2><p>1）在想要放置的地方建立一个文件夹<code>GitHubName.github.io</code>作为博客根目录；</p>
<p>2）在博客根目录下初始化hexo，可以看到博客根目录中有了以下内容；</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo init</span><br><span class="line">npm install</span><br></pre></td></tr></table></figure>

<img src="文件目录截图4.png" alt="文件目录截图4" style="zoom:70%;" />

<p>3）在<code>source</code>文件夹下新建一个<code>CNAME</code>文件，然后在此文件中写入注册好的个人域名；</p>
<img src="文件目录截图5.png" alt="文件目录截图5" style="zoom:70%;" />

<p>4）在博客根目录下静态部署，生成博客，此时会将<code>source\_posts</code>文件夹下的<code>hello-world.md</code>文件解析到一个<code>public</code>文件夹下，并生成<code>db.json</code>文件；</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo g</span><br></pre></td></tr></table></figure>

<img src="文件目录截图6.png" alt="文件目录截图6" style="zoom:70%;" />

<p>5）在博客根目录下本地运行</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo s</span><br></pre></td></tr></table></figure>

<p>至此，在<a target="_blank" rel="noopener" href="http://localhost:4000/">http://localhost:4000/</a> 即可本地预览博客，预览结束之后按<code>Ctrl+C</code>来停止运行服务器，每当修改完网站里的东西就可以通过这种方式来预览，而不是直接发布到网上。</p>
<h2 id="3-2-配置和部署"><a href="#3-2-配置和部署" class="headerlink" title="3.2 配置和部署"></a>3.2 配置和部署</h2><p>1）在博客根目录下的<code>_config.yml</code>文件中作以下配置，<code>_config.yml</code>是整个博客的配置文件，每项配置参数在中<a target="_blank" rel="noopener" href="https://hexo.io/zh-cn/docs/configuration">hexo官网</a>有详细的介绍；</p>
<img src="配置文件截图1.png" alt="配置文件截图1" style="zoom:70%;" />

<p>2）在博客根目录下安装一个帮助我们上传文件的Git部署插件；</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure>

<p>3）将博客部署到GitHub服务器，这一步如果没有反应的话，就在<code>_config.yml</code>文件中所配置<code>repo</code>的冒号后再增加一个空格；</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo d</span><br></pre></td></tr></table></figure>

<p>4）在浏览器中输入个人域名即可看到如下页面，代表成功部署了博客。</p>
<img src="浏览器截图3.png" alt="浏览器截图3" style="zoom:70%;" />

<h2 id="3-3-个性化主题"><a href="#3-3-个性化主题" class="headerlink" title="3.3 个性化主题"></a>3.3 个性化主题</h2><p>1）在<a target="_blank" rel="noopener" href="https://hexo.io/themes/">hexo themes</a>中挑一个想要的hexo主题，在博客根目录下执行以下操作，即可将xxx主题保存到<code>themes\xxx</code>文件夹下；</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> xxxURL themes\xxx</span><br></pre></td></tr></table></figure>

<p>2）在博客根目录下的<code>_config.yml</code>文件中作以下配置；</p>
<img src="配置文件截图2.png" alt="配置文件截图2" style="zoom:70%;" />

<p>3）关于个人图标、打赏、评论等功能需要在xxx主题的<code>_config.yml</code>等文件中进行配置，不同主题的配置方法可能略有不同，可自行根据所设置主题的<code>README.md</code>文件所介绍的内容进行配置；</p>
<p>4）在博客根目录下重复以下步骤即可在<a target="_blank" rel="noopener" href="http://localhost:4000/">http://localhost:4000/</a> 中预览新主题下的博客；</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo clean</span><br><span class="line">hexo g</span><br><span class="line">hexo s</span><br></pre></td></tr></table></figure>

<p>5）将博客部署到GitHub服务器并等待一段时间后，在浏览器中输入个人域名即可看到所设置主题下的博客。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo d</span><br></pre></td></tr></table></figure>

<h2 id="3-4-菜单和写作"><a href="#3-4-菜单和写作" class="headerlink" title="3.4 菜单和写作"></a>3.4 菜单和写作</h2><p>1）在<code>themes\xxx</code>目录下的<code>_config.yml</code>文件中作以下配置，即可设置想要的博客菜单，下图设置了首页、分类以及归档菜单；</p>
<img src="配置文件截图3.png" alt="配置文件截图3" style="zoom:70%;" />

<p>2）在博客根目录下执行以下操作即可在<code>source</code>目录下生成一个<code>categories</code>文件夹，编辑（<a target="_blank" rel="noopener" href="https://markdown.com.cn/">markdown</a>）该文件夹中的<code>index.md</code>文件，那么在网页上点击<code>categories</code>菜单后就能显示出所编辑的内容；</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new page categories</span><br></pre></td></tr></table></figure>

<img src="文件目录截图7.png" alt="文件目录截图7" style="zoom:70%;" />

<p>3）为了在静态部署生成博客时能够将<code>source\_posts</code>中的图片资源也解析到<code>public</code>文件夹中，需要在博客根目录下的<code>_config.yml</code>文件中作以下配置；</p>
<img src="配置文件截图4.png" alt="配置文件截图4" style="zoom:90%;" />

<p>4）此时执行以下操作即可在<code>source\_post</code>目录新建一个<code>xxx.md</code>文件和一个<code>xxx</code>文件夹，那么在编辑<code>xxx.md</code>文件时所使用的图片资源就放置在<code>xxx</code>文件夹中；</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new xxx</span><br></pre></td></tr></table></figure>

<p>5）有时候需要在不同页面跳转，只需在其他md文件中插入需要的跳转的md文件被解析后的地址，即可完成跳转；</p>
<p>6）重复之前的预览、调整和部署操作，在浏览器中输入个人域名即可看到编辑后的博客内容；</p>
<p>7）在博客根目录下安装以下插件可分别令博客支持搜索功能和文章加密功能。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-generator-searchdb</span><br><span class="line">npm install --save hexo-blog-encrypt</span><br></pre></td></tr></table></figure>

<h2 id="3-5-多设备同步"><a href="#3-5-多设备同步" class="headerlink" title="3.5 多设备同步"></a>3.5 多设备同步</h2><p>hexo 每次更新并部署的都是由 source 文件夹中的源文件所生成的静态 html 文件，远程 repo 中并不包含源文件，因此多设备同步的原理就是将源文件也上传到远程 repo 中，<strong>多个设备之间同步的是源文件（不是静态文件），静态 html 文件依旧可以在各自设备本地由源文件生成更新并部署</strong>。网上关于多设备同步全都是在现有的博客 repo 中新建一个分支来存放源文件，由于我并不想公开源文件所以就用另一个 private repo 来作为源文件的同步中心。</p>
<p>1）用于生成静态 html 所需的文件见下图中选中的内容，其中，scaffolds 是博文模板，source 是博文源文件，themes 是博客主题，_config.yml 是全局配置文件，package.json 记录了 hexo 需要的包的信息（npm 根据这个信息来安装 hexo 环境）；</p>
<img src="设备同步截图1.png" alt="设备同步截图1" style="zoom:60%;" />

<p>2）由于 themes 并不会频繁更改，而且其中的内容也是由其他的 theme repo clone 得到的，含有不能嵌套上传的 .git，所以我将除了 themes 以外的内容（另外还加上了 .npmignore）选作需要通过 private repo 来同步的内容；</p>
<p>3）在每个设备准备好工作前后用于同步的<code>Sync-Before-Update.sh</code>和<code>Sync-After-Update.sh</code>脚本并通过<code>sudo chmod a+x xxx.sh</code>命令赋权，脚本内容如下（<a href="../../../../2023/10/14/shell-script/">参考</a>）；</p>
<img src="设备同步截图2.png" alt="设备同步截图2" style="zoom:70%;" />

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Sync-Before-Update.sh</span></span><br><span class="line">script_path=&quot;$(dirname &quot;$BASH_SOURCE&quot;)&quot;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">stop <span class="built_in">local</span> deploy</span></span><br><span class="line">if [[ &quot;$OSTYPE&quot; = darwin* ]]; then</span><br><span class="line">	kill -9 `lsof -ti:4000`</span><br><span class="line">fi</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">update lastest backup</span></span><br><span class="line">cd &quot;$script_path/backup/documents&quot;</span><br><span class="line">git pull</span><br><span class="line">cp -R source ../../GitHubName.github.io/</span><br><span class="line">cp -R scaffolds ../../GitHubName.github.io/</span><br><span class="line">cp _config.yml ../../GitHubName.github.io/</span><br><span class="line">cp package.json ../../GitHubName.github.io/</span><br><span class="line">cp package-lock.json ../../GitHubName.github.io/</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">run <span class="built_in">local</span> deploy</span></span><br><span class="line">cd &quot;$script_path/GitHubName.github.io&quot;</span><br><span class="line">if [[ &quot;$OSTYPE&quot; = darwin* ]]; then</span><br><span class="line">	hexo s</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Sync-After-Update.sh</span></span><br><span class="line">script_path=&quot;$(dirname &quot;$BASH_SOURCE&quot;)&quot;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">backup update</span></span><br><span class="line">cd &quot;$script_path/backup/documents&quot;</span><br><span class="line">cp -R ../../GitHubName.github.io/source .</span><br><span class="line">cp -R ../../GitHubName.github.io/scaffolds .</span><br><span class="line">cp ../../GitHubName.github.io/_config.yml .</span><br><span class="line">cp ../../GitHubName.github.io/package.json .</span><br><span class="line">cp ../../GitHubName.github.io/package-lock.json .</span><br><span class="line">git add .</span><br><span class="line">git commit -m &#x27;update&#x27;</span><br><span class="line">git push</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">remote deploy</span></span><br><span class="line">cd &quot;$script_path/GitHubName.github.io&quot;</span><br><span class="line">hexo clean</span><br><span class="line">hexo g</span><br><span class="line">hexo d</span><br></pre></td></tr></table></figure>

<p>4）运行<code>Sync-After-Update.sh</code>，原设备 GitHubName.github.io 目录中选定的内容就同步到原设备本地的 private repo 以及远程的 private repo 中，每次完成在当前设备的工作之后，都需要运行一次<code>Sync-After-Update.sh</code>来完成源文件的同步和静态文件的重新部署；</p>
<img src="设备同步截图3.png" alt="设备同步截图3" style="zoom:70%;" />

<p>5）在新设备安装 Git，设置 Git 用户信息，生成新的 ssh key 并将其添加到 GitHub 主页；</p>
<img src="设备同步截图4.png" alt="设备同步截图4" style="zoom:40%;" />

<p>6）在新设备安装 Node.js（不要用 brew 安装，路径会有问题），配置 npm 环境变量，在设备本地建立和原设备一致的 GitHubName.github.io 目录并进入该目录；</p>
<p>7）在新设备 GitHubName.github.io 目录下依次运行如下三个命令来分别安装 hexo、安装 package.json 中所记录的 hexo 所需要的包、安装 hexo 部署工具；</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo</span><br><span class="line">npm install</span><br><span class="line">npm install hexo-deployer-git</span><br></pre></td></tr></table></figure>

<p>8）运行<code>Sync-Before-Update.sh</code>，原设备 GitHubName.github.io 目录中选定的内容就同步到新设备 GitHubName.github.io 目录以及设备本地的 private repo 中，每次在当前设备进行工作之前，都需要运行一次<code>Sync-Before-Update.sh</code>来得到最新的源文件。</p>
<img src="设备同步截图5.png" alt="设备同步截图5" style="zoom:45%;" />

<h1 id="4、问题记录"><a href="#4、问题记录" class="headerlink" title="4、问题记录"></a>4、问题记录</h1><p>1）<strong>插入图片的路径问题：</strong>静态部署前<code>xxx.md</code>文件中所插入的图片位于<code>xxx</code>文件夹中，静态部署后图片会被解析到与html文件相同的文件夹下，因此，在编辑完成后静态部署前需要将插入图片的路径更改为正确的形式，这一点可自行观察解析后的<code>public</code>文件夹结构</p>
<p>2）<strong>代码显示问题：</strong>无序列表文本中采用反引号包裹的代码在网页上没有显示出代码形式，而是普通文本形式，此时，需要在无序列表的某一条中的最后依次输入回车和后退（不要输入连续两次回车），此时反引号包裹的代码即可在网页上正常显示了（导致这个问题的原因暂时还不知道）</p>
<p>3）<strong>浏览器上的更新问题：</strong>有时候需要将浏览数据清除，再重新打开网页才能正确显示出更新后的博客内容</p>
<p>4）<strong>GitHub Page 不显示问题</strong>：仓库设为私有后，博客将无法正常显示，即便再改为公有后还是无法显示，此时需要在 GitHub Page 中将域名移除重新添加即可</p>
<p>5）<strong>命令执行权限问题</strong>：有的命令需要管理员身份才能执行，比如<code>hexo d</code></p>
<p>6）<strong>部署时报错</strong>：先删除 <code>.deploy_git</code> 文件夹，然后输入 <code>git config --global core.autocrlf false</code>，最后重新部署即可</p>
<img src="报错截图1.png" alt="文件目录截图7" style="zoom:70%;" />

<h1 id="5、参考资料"><a href="#5、参考资料" class="headerlink" title="5、参考资料"></a>5、参考资料</h1><ul>
<li><a target="_blank" rel="noopener" href="https://sketchk.xyz/2017/03/24/A-Guide-Of-Making-Your-Personal-Blog-Part-1/">《A-Guide-Of-Making-Your-Personal-Blog》</a></li>
<li><a target="_blank" rel="noopener" href="https://docs.github.com/cn/pages/configuring-a-custom-domain-for-your-github-pages-site/about-custom-domains-and-github-pages">《about-custom-domains-and-github-pages》</a></li>
<li><a target="_blank" rel="noopener" href="https://juejin.cn/post/6844904131266609165">https://juejin.cn/post/6844904131266609165</a></li>
<li><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/102592286">https://zhuanlan.zhihu.com/p/102592286</a></li>
<li><a target="_blank" rel="noopener" href="http://lowrank.science/archives/">http://lowrank.science/archives/</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/D0n9X1n/hexo-blog-encrypt/blob/master/ReadMe.zh.md">https://github.com/D0n9X1n/hexo-blog-encrypt/blob/master/ReadMe.zh.md</a></li>
<li><a target="_blank" rel="noopener" href="https://www.itfanr.cc/2021/04/16/hexo-blog-article-encryption/">https://www.itfanr.cc/2021/04/16/hexo-blog-article-encryption/</a></li>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/K1052176873/article/details/122879462">https://blog.csdn.net/K1052176873/article/details/122879462</a></li>
</ul>
</section>
    <!-- Tags START -->
    
    <!-- Tags END -->
    <!-- NAV START -->
    
  <div class="nav-container">
    <!-- reverse left and right to put prev and next in a more logic postition -->
    
    
      <a class="nav-right" href="/2022/05/06/clean-code/">
        
          Clean Code
        
        <span class="nav-arrow"> →</span>
      </a>
    
  </div>

    <!-- NAV END -->
    <!-- 打赏 START -->
    
    <!-- 打赏 END -->
    <!-- 二维码 START -->
    
    <!-- 二维码 END -->
    
      <!-- Utterances START -->
      <div id="utterances"></div>
      <script src="https://utteranc.es/client.js"
        repo=""
        issue-term="pathname"
        theme="github-light"
        crossorigin="anonymous"
        async></script>    
      <!-- Utterances END -->
    
  </article>
  <!-- Article END -->
  <!-- Content START -->
  
    <aside class="content-container">
  <div class="toc-main">
  
      
          <strong class="toc-title">CONTENT</strong>
          <ol class="toc-nav"><li class="toc-nav-item toc-nav-level-1"><a class="toc-nav-link" href="#1%E3%80%81%E5%B7%A5%E5%85%B7"><span class="toc-nav-text">1、工具</span></a></li><li class="toc-nav-item toc-nav-level-1"><a class="toc-nav-link" href="#2%E3%80%81%E5%89%8D%E6%9C%9F%E5%87%86%E5%A4%87"><span class="toc-nav-text">2、前期准备</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#2-1-Git%E3%80%81GitHub%E5%8F%8A%E9%85%8D%E7%BD%AE"><span class="toc-nav-text">2.1 Git、GitHub及配置</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#2-2-GitHub-Page%E5%92%8C%E5%9F%9F%E5%90%8D"><span class="toc-nav-text">2.2 GitHub Page和域名</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#2-3-Node-js%E5%92%8CHexo"><span class="toc-nav-text">2.3 Node.js和Hexo</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-1"><a class="toc-nav-link" href="#3%E3%80%81%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA"><span class="toc-nav-text">3、博客搭建</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#3-1-%E6%90%AD%E5%BB%BA%E5%92%8C%E9%A2%84%E8%A7%88"><span class="toc-nav-text">3.1 搭建和预览</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#3-2-%E9%85%8D%E7%BD%AE%E5%92%8C%E9%83%A8%E7%BD%B2"><span class="toc-nav-text">3.2 配置和部署</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#3-3-%E4%B8%AA%E6%80%A7%E5%8C%96%E4%B8%BB%E9%A2%98"><span class="toc-nav-text">3.3 个性化主题</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#3-4-%E8%8F%9C%E5%8D%95%E5%92%8C%E5%86%99%E4%BD%9C"><span class="toc-nav-text">3.4 菜单和写作</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#3-5-%E5%A4%9A%E8%AE%BE%E5%A4%87%E5%90%8C%E6%AD%A5"><span class="toc-nav-text">3.5 多设备同步</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-1"><a class="toc-nav-link" href="#4%E3%80%81%E9%97%AE%E9%A2%98%E8%AE%B0%E5%BD%95"><span class="toc-nav-text">4、问题记录</span></a></li><li class="toc-nav-item toc-nav-level-1"><a class="toc-nav-link" href="#5%E3%80%81%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99"><span class="toc-nav-text">5、参考资料</span></a></li></ol>
      
  
  </div>
</aside>
  
  <!-- Content END -->
</main>

<script>
  (function () {
    var url = 'http://example.com/2022/05/06/blog/';
    var banner = ''
    if (banner !== '' && banner !== 'undefined' && banner !== 'null') {
      $('#article-banner').css({
        'background-image': 'url(' + banner + ')'
      })
    } else {
      $('#article-banner').geopattern(url)
    }
    $('.header').removeClass('fixed-header')

    // error image
    $(".markdown-content img").on('error', function() {
      $(this).attr('src', '/css/images/error_icon.png')
      $(this).css({
        'cursor': 'default'
      })
    })

    // zoom image
    $(".markdown-content img").on('click', function() {
      var src = $(this).attr('src')
      if (src !== '/css/images/error_icon.png') {
        var imageW = $(this).width()
        var imageH = $(this).height()

        var zoom = ($(window).width() * 0.95 / imageW).toFixed(2)
        zoom = zoom < 1 ? 1 : zoom
        zoom = zoom > 2 ? 2 : zoom
        var transY = (($(window).height() - imageH) / 2).toFixed(2)

        $('body').append('<div class="image-view-wrap"><div class="image-view-inner"><img src="'+ src +'" /></div></div>')
        $('.image-view-wrap').addClass('wrap-active')
        $('.image-view-wrap img').css({
          'width': `${imageW}`,
          'transform': `translate3d(0, ${transY}px, 0) scale3d(${zoom}, ${zoom}, 1)`
        })
        $('html').css('overflow', 'hidden')

        $('.image-view-wrap').on('click', function() {
          $(this).remove()
          $('html').attr('style', '')
        })
      }
    })
  })();
</script>







    <div class="scroll-top">
  <span class="arrow-icon"></span>
</div>
    <!--
<footer class="app-footer">
  <p class="copyright">
    &copy; 2024 | Proudly powered by <a href="https://hexo.io" target="_blank">Hexo</a>
    <br>
    Theme by <a target="_blank" rel="noopener" href="https://github.com/yanm1ng">yanm1ng</a>
    
  </p>
</footer>
-->

<script>
  function async(u, c) {
    var d = document, t = 'script',
      o = d.createElement(t),
      s = d.getElementsByTagName(t)[0];
    o.src = u;
    if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
    s.parentNode.insertBefore(o, s);
  }
</script>
<script>
  async("//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js", function(){
    FastClick.attach(document.body);
  })
</script>

<script>
  var hasLine = 'true';
  async("//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js", function(){
    $('figure pre').each(function(i, block) {
      var figure = $(this).parents('figure');
      if (hasLine === 'false') {
        figure.find('.gutter').hide();
      }
      hljs.configure({useBR: true});
      var lang = figure.attr('class').split(' ')[1] || 'code';
      var codeHtml = $(this).html();
      var codeTag = document.createElement('code');
      codeTag.className = lang;
      codeTag.innerHTML = codeHtml;
      $(this).attr('class', '').empty().html(codeTag);
      figure.attr('data-lang', lang.toUpperCase());
      hljs.highlightBlock(block);
    });
  })
</script>
<!-- Baidu Tongji -->


<script src="/js/script.js"></script>


  </body>
</html>