---
title: Git
date: 2022-05-07 18:02:50
tags:
---

# 版本控制

将每一次文件变更的时间，作者，内容都记录下来，并更新版本号。通过记录文件内容的变更，从而**追踪文件的变更**。此外，由于软件开发往往是多人协同作业，那么版本间的同步问题以及开发者间的通信问题都需要通过版本控制来解决，也就是说，版本控制的另一功能是**并行开发**。在开发过程中，首先需要设定开发基线，确定各个配置项的开发初始版本，开发人员再基于开发基线的版本，开发出所需的目标版本，并行开发中的许多错误都可以通过版本控制中分支与合并的方法来解决。

# 集中式版本控制系统

集中式版本控制系统（Centralized Version Control Systems），简称 CVCS。项目的历史记录均被保存在单一位置，**有丢失风险**，且**必须联网**才能工作。

# 分布式版本控制系统

分布式版本控制系统（Distributed Version Control System），简称 DVCS。客户端不仅提取最新版本的文件快照，还把代码仓库完整的克隆备份下来，**不存在丢失风险**，**不需要联网**就能工作。DVCS通过一个中心服务器来方便的交换修改。没有中心服务器时DVCS也能工作，但只是不方便交换修改而已。Github就是一个中心服务器。

# Git

Git属于DVCS，Git与其他版本控制系统的主要区别在于对待数据的方式。大多数版本控制系统都是以文件变更列表的方式存储信息，这类系统将它们保存的信息看作一组基本文件和每个文件随时间逐步累积的差异，而Git采用直接记录快照的方式，而非差异比较。每次提交更新或者保存项目状态时，Git对当时的全部文件制作一个快照并保存这个快照的索引。为了高效，如果文件没有修改，Git不再重新存储该文件，而是保留一个链接指向之前存储的文件。Git仓库和Github中心服务器之间的传输是通过SSH加密的。

# 工作流

新建或克隆一个仓库后，当前目录为工作区（Working area），开发人员在工作区修改文件内容。工作区下有一个隐藏目录（`.git` directory）为Git仓库，Git仓库中存储有所有分支信息，使用一个`HEAD`指针指向当前分支。暂存区（Staging area）用于暂存修改后的文件快照，暂存区和Git仓库组成Git版本库。

<img src="工作流图.jpg" alt="工作流图" style="zoom:100%;" />

# 分支

- 每个提交通过指针连接成一条时间线。

- 创建仓库时，`master`指针指向主分支，`HEAD`指针始终指向当前分支，当前分支可能是主分支也可能是新建的分支。

- 新建分支就是新建一个指针指向时间线的最后一个节点。

- 切换分支就是让`HEAD`指针指向新分支，表示新分支成为当前分支。

- 每次提交只会让当前分支指针向后移动，而其他分支指针不会移动。

- 当新建分支开发完毕后，就合并到主分支上，合并分支只需要改变指针即可。

<img src="分支.jpg" alt="分支" style="zoom:100%;" />

# 命令速查表

http://www.cheat-sheets.org/saved-copy/git-cheat-sheet.pdf

# 参考资料

- https://www.liaoxuefeng.com/wiki/896043488029600

- [http://www.cyc2018.xyz/其他/编码实践/Git.html](http://www.cyc2018.xyz/其它/编码实践/Git.html)

- https://snailclimb.gitee.io/javaguide/#/./docs/tools/git/git-intro