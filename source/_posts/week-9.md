---
title: 2022.10.24 - 2022.10.28
date: 2022-10-24 22:03:12
password: 1062597351
tags:
---

> - 工作相关：慢加载分页（业务梳理、重构代码、一点想法）
> - 博客更新：无

### 业务梳理

原本我以为优化的方向是上周写的那些，但是其实真正要做的事情是分页。

现有的老接口是后端将所有数据返回一次性加载出来返回给前端，由前端做分页，相应的那些页面上提供给用户的数据处理（过滤、排序等）相关功能也都由前端实现。

在早期数据量还比较小的时候，前端分页还是后端分页，甚至做不做分页都区别不大，那么当如今数据量很大，却依旧保持早期后端一次性加载全部数据的模式，就会出现用户无法接受的漫长的执行时间，所以应当进行分页，每次发送请求时，后端（数据库）应当仅返回当前页的数据。

为了让后端返回正确的分页数据，所以应当把那些通过 Java 代码实现的对数据库所返回数据的逻辑处理全部前置到 SQL 语句中，此时，令数据库直接返回处理好的分页数据。

与此同时，原本由前端实现的提供给用户的数据处理（过滤、排序等）相关功能也需要全部改为由后端实现，即后端需要相应的增加一套由用户执行的数据重新处理后重新分页的功能，这也就是本周的工作内容。

<img src="对比.png" alt="前后逻辑对比" style="zoom:60%;" />

以上才是这次需求的问题背景和业务改动点。

### 工作效率

大量重复的工作会让人失去工作的热情，我最有热情的时间段是在上周，这周的工作主要是在后端重新实现原本前端实现的数据处理相关的功能。这个代码逻辑写起来简单又繁琐，枯燥又容易出错，为了避免做无聊机械的事情，我花了大量时间在提取公共抽象和重构代码上。

可能是因为我现在重构代码的思维和手法并不熟练，会出现代码改来改去又还原的情况，也对自己重构后的代码结构并不自信，加上涉及到的业务细节确实很繁琐很容易出错，所以这个简单的工作内容我做了整整一周。

虽然同事说我可以直接改老接口，但是面对这么大的改动，更稳妥的方式应该是重新写一个新接口，避免对老接口做任何修改，当我意识到这一点的时候，老接口已经被我改的面目全非，于是不得花时间来重新整一个新的，就很浪费时间。

因为做事不够老练，所以效率不高，因为心态依旧不够稳，所以会着急。
